function inicializarJquery(){$("#tabs").tabs({fx:{opacity:"toggle"},select:function(e,f){fixedMenu2&&fixedMenu2!="undefined"&&fixedMenu2.hide()}});$("#tabs").tabs("select",2);$("#btnOcultar").click(function(){$("#medAnt").toggle("slow")});document.getElementById("fixeddiv")&&$("#fixeddiv").draggable();document.getElementById("fixeddiv2")&&$("#fixeddiv2").draggable();for(var a=0,b=0,c=new Array("N","A","U","Q"),d="";b<c.length;){for(d=c[b];document.getElementById("wnmmed"+d+a);){$("#wnmmed"+d+a).tooltip({track:true, delay:0,showURL:false,showBody:" - ",opacity:0.95,left:-140});a++}a=0;b++}a=$(".simpleTree").simpleTree({autoclose:true,drag:false,afterClick:function(e){var f=$("span:first",e);e=f.parent().attr("id");f=f.text();e.substring(0,1)=="H"&&seleccionHojaAccionesComplementarias(e,f)},afterDblClick:function(e){},afterMove:function(e,f,h){},afterAjax:function(){},animate:true});enfocarInicio();document.getElementById("whgrabado")&&document.getElementById("whgrabado").value!=""&&$.growlUI("","Se ha grabado el kardex"); $("#tabs").css("display","block");$("#msjInicio").css("display","none")}function intercalarExamenAnterior(a){$("#ex"+a).toggle("normal")}function intercalarMedicamentoAnterior(a,b){$("#med"+b+a).toggle("normal")} function confirmarGeneracion(){var a=document.forms.forma.whistoria.value,b=document.forms.forma.wingreso.value,c=document.forms.forma.wfecha.value,d=document.forms.forma.whgrabado;if(a&&b)document.location.href=d&&d.value!=""?"generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value+"&waccion=b&whistoria="+a+"&wingreso="+b+"&wfecha="+c+"&whgrabado="+d.value:"generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value+"&waccion=b&whistoria="+a+"&wingreso="+b+"&wfecha="+c;else alert("No se encontr\u00f3 historia, ingreso y fecha en los parametros de entrada.")} function inicio(){document.location.href="generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value}function enfocarInicio(){document.getElementById("wthistoria")&&document.getElementById("wthistoria").focus()} function validarFechayHoraLocal(a,b){var c=true,d=new Date,e=new Date;a=a.split("-");d.setFullYear(a[0]);d.setMonth(eval(a[1]-1));d.setDate(a[2]);b=b.split(":");d.setHours(b[0],b[1],b[2],0);d=d.getTime()-e.getTime();d=Math.floor(d/6E4);if(Math.abs(d)>30)c=false;c||alert("Recuerde que la fecha y hora del equipo local deben ser las actuales. Son "+Math.abs(d)+" minutos de diferencia")} function consultarKardex(){var a=document.forms.forma.whistoria.value,b=esFechaMenorIgualAActual(document.forms.forma.wfecha.value),c=document.getElementById("whgrabado");if(!a||a=="")alert("Debe especificar una historia cl\u00ednica");else if(b)document.location.href=c&&c.value!=""?"generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value+"&waccion=a&whistoria="+a+"&wfecha="+document.forms.forma.wfecha.value+"&whgrabado="+c.value:"generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value+ "&waccion=a&whistoria="+a+"&wfecha="+document.forms.forma.wfecha.value;else alert("La fecha ingresada debe ser igual o anterior a la fecha actual")}function salida(){if(document.getElementById("fixeddiv2")){document.getElementById("wconfdisp").checked||alert("Se grabar\u00e1 y cerrar\u00e1 el kardex, tenga en cuenta que este NO HA SIDO confirmado.");grabarKardex()}} function marcarKardexConfirmado(){var a=document.getElementById("wcconf"),b=document.getElementById("wconfdisp");if(a)b.checked=a.checked}function compareDatesOnly(a,b){var c=a.getYear(),d=b.getYear(),e=a.getMonth(),f=b.getMonth();a=a.getDate();b=b.getDate();if(c>d)return-1;if(d>c)return 1;if(e>f)return-1;if(f>e)return 1;if(a>b)return-1;if(b>a)return 1;return 0} function calendario(a,b){Zapatec.Calendar.setup({weekNumbers:false,showsTime:true,timeFormat:"24",electric:false,inputField:"wfinicio"+b+a,button:"btnFecha"+b+a,ifFormat:"%Y-%m-%d a las:%H:00",daFormat:"%Y/%m/%d",timeInterval:120,dateStatusFunc:fechasDeshabilitadas})}function calendario2(a){Zapatec.Calendar.setup({weekNumbers:false,showsTime:false,timeFormat:"24",electric:false,inputField:"wffinal"+a,button:"btnFechaFin"+a,ifFormat:"%Y-%m-%d",daFormat:"%Y/%m/%d"})} function calendario3(a){Zapatec.Calendar.setup({weekNumbers:false,showsTime:false,timeFormat:"12",electric:false,inputField:"wfsol"+a,button:"btnFechaSol"+a,ifFormat:"%Y-%m-%d",daFormat:"%Y/%m/%d",dateStatusFunc:fechasDeshabilitadas})}function calendario4(a){Zapatec.Calendar.setup({weekNumbers:false,showsTime:false,timeFormat:"12",electric:false,inputField:"wfliq"+a,button:"btnFechaLiq"+a,ifFormat:"%Y-%m-%d",daFormat:"%Y/%m/%d",dateStatusFunc:fechasDeshabilitadas})} function stopEvent(a){if(!a)a=window.event;if(a.stopPropagation){a.stopPropagation();a.preventDefault()}else a.returnValue=false}function fechasDeshabilitadas(a,b,c,d,e,f){b=new Date;c=false;a=compareDatesOnly(b,a);if(a<0)c=true;if(typeof e!="undefined")if(e<=b.getHours()&&a<0)c=true;return c} function validarDiferenciaFechasServidorCliente(a,b){var c=true,d=new Date,e=new Date;a=a.split("-");d.setFullYear(a[0]);d.setMonth(eval(a[1]-1));d.setDate(a[2]);b=b.split(":");d.setHours(b[0],b[1],b[2],0);d=d.getTime()-e.getTime();d=Math.floor(d/6E4);if(Math.abs(d)>30)c=false;return c}function cargarArchivo(){var a=document.getElementById("file_upload_form"),b=document.getElementById("lkRuta");if(a){a.target="upload_target";if(b)b.innerHTML=""}a.submit()} function teclaEnterEntero(a,b){var c=validarEntradaEntera(a);a=document.all?a.keyCode:a.which;c&&a==13&&eval(b);return c}function teclaEnter(a,b){(document.all?a.keyCode:a.which)==13&&eval(b);return true}function seleccionReemplazo(a){if(a!=null){elementosDetalle=a.toString();fixedMenu.show()}else alert("No se captur\u00f3 identificador de medicamento a modificar")} function seleccionHojaAccionesComplementarias(a,b){document.getElementById("txtSondas").style.background="#FFFFFF";document.getElementById("txCuidados").style.background="#FFFFFF";document.getElementById("txAislamientos").style.background="#FFFFFF";document.getElementById("txtCuraciones").style.background="#FFFFFF";document.getElementById("txTerapia").style.background="#FFFFFF";document.getElementById("txtInterconsulta").style.background="#FFFFFF";var c="";switch(a.substring(1).split("-")[0]){case "01":c= document.getElementById("txtSondas");break;case "02":c=document.getElementById("txCuidados");break;case "03":c=document.getElementById("txAislamientos");break;case "04":c=document.getElementById("txtCuraciones");break;case "05":c=document.getElementById("txTerapia");break;case "06":c=document.getElementById("txtInterconsulta");break;default:break}if(c){c.style.background="#CCFFCC";if(c.value.indexOf(b)==-1)c.value+="\n\r*"+b}} function expandirRama(a,b){document.getElementById("txtSondas").style.background="#FFFFFF";document.getElementById("txCuidados").style.background="#FFFFFF";document.getElementById("txAislamientos").style.background="#FFFFFF";document.getElementById("txtCuraciones").style.background="#FFFFFF";document.getElementById("txTerapia").style.background="#FFFFFF";document.getElementById("txtInterconsulta").style.background="#FFFFFF";a.style.background="#CCFFCC";document.getElementById(b).children[0].click()} function abrirMovimientoArticulos(a){limpiarBuscador();return fixedMenu2.show(a)} function seleccionarComponente(a,b){if(cuentaInfusiones>0){var c=cuentaInfusiones-1;if(document.getElementById("wtxtcomponentes"+c)){c=document.getElementById("wtxtcomponentes"+c);var d=document.createElement("option");d.setAttribute("value",a);if(esIE)d.setAttribute("text",b.replace(/_/g," "));else d.innerHTML=b.replace(/_/g," ");try{c.add(d,null)}catch(e){c.add(d)}}else alert("No se encontro elemento a agregar.")}else alert("Aun no ha agregado el primer articulo")} function seleccionHabitacionPaciente(){var a=document.getElementById("wselhab")?document.getElementById("wselhab").value:"";if(a&&a!="")if(document.getElementById("whhistoria"))document.getElementById("whhistoria").innerHTML=a} function consultarHabitaciones(){var a=document.getElementById("cntHabitacion"),b="";b="consultaAjaxKardex=25&basedatos="+document.forms.forma.wbasedato.value+"&servicio="+document.getElementById("wsservicio").value;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(b);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200)a.innerHTML= ajax.responseText;$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(c){}} function consultarMedicosEspecialidad(){var a=document.getElementById("wselesp").value,b="";b="consultaAjaxKardex=19&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&especialidad="+a;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(b);ajax.onreadystatechange=function(){if(ajax.readyState==4&& ajax.status==200)document.getElementById("cntSelMedicos").innerHTML=ajax.responseText;$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(c){}} function consultarEsquemaInsulina(){var a=document.getElementById("wdexesquema"),b=document.getElementById("wdexins");b=document.getElementById("wdexfrecuencia");if(a&&a.value&&b&&b.value){if(document.getElementById("btnEsquema"))document.getElementById("btnEsquema").disabled=false;consultarEsquemaInsulinaElemento(a.value)}else document.getElementById("btnEsquema").disabled=true} function grabarEsquemaDextrometer(){var a=document.getElementById("wdexins"),b=document.getElementById("wdexfrecuencia"),c=document.getElementById("wdexesquema"),d=document.getElementById("whdexesquemaant"),e=document.forms.forma.usuario.value,f=document.forms.forma.whistoria.value,h=document.forms.forma.wingreso.value,k=document.forms.forma.wfechagrabacion.value;d=c.value!=d.value;if(!b||b.value=="")alert("Debe especificar una frecuencia");else{for(var g=0,j="",m="",n="",q="";document.getElementById("wdexint"+ g);){if(document.getElementById("wdexint"+g)&&document.getElementById("wdexint"+g).value!=""&&document.getElementById("wdexseludo"+g)&&document.getElementById("wdexseludo"+g).value!=""&&document.getElementById("wdexselvia"+g)&&document.getElementById("wdexselvia"+g).value!=""){j+=document.getElementById("wdexint"+g).value+"|";m+=document.getElementById("wdexseludo"+g).value+"|";n+=document.getElementById("wdexselvia"+g).value+"|";q+=document.getElementById("wdexobs"+g).value+"|"}else{alert("Por favor revise los valores del esquema. Debe especificar un valor de dosis, unidad y via. Linea: "+ eval(g+1));return}g++}grabarEsquemaDextrometerElemento(f,h,k,a.value,b.value,c.value,j,m,n,q,e,d)}} function quitarEsquemaDextrometer(){var a=document.getElementById("wdexins"),b=document.getElementById("wdexfrecuencia"),c=document.getElementById("wdexesquema");c=document.forms.forma.usuario.value;var d=document.forms.forma.whistoria.value,e=document.forms.forma.wingreso.value,f=document.forms.forma.wfechagrabacion.value;!b||b.value==""?alert("No se ha especificado una frecuencia o condicion"):eliminarEsquemaDextrometerElemento(d,e,f,a.value,c)} function seleccionarMedicamento(a,b,c,d,e,f,h,k,g,j,m,n,q,p,y,s,v){var l="";var r=l=0;l=v;switch(v){case "N":r=elementosDetalle-1;posicionActual=elementosDetalle;break;case "A":r=elementosAnalgesia-1;posicionActual=elementosAnalgesia;break;case "U":r=elementosNutricion-1;posicionActual=elementosNutricion;break;case "Q":r=elementosQuimioterapia-1;posicionActual=elementosQuimioterapia;break;default:r=elementosDetalle-1;posicionActual=elementosDetalle;break}v=document.getElementById("wnmmed"+l+r);var z= document.getElementById("detKardex"+l);z="tbDetalle"+l;stopEvent(window.onbeforeunload);if(posicionActual>0){e=e.toString();if(v){var A=z=false,B=0,w=null;for(w=w="";B<elementosDetalle;){if(w=document.getElementById("wnmmed"+l+B)){w=w.tagName!="DIV"?w.value.split("-"):w.innerHTML.split("-");w=w[0];if(w==a){z=true;break}}B++}if(q=="on"&&z)A=false;if(A)alert("El articulo ya se encuentra en la lista. No se puede seleccionar");else if(v.tagName!="DIV"){if(d=="CTR"){alert("Este medicamento se encuentra en el grupo de control. Requiere formula de control"); v.value=a+"-"+c+"-"+b.replace(/_/g," ")+" (de control)"}else v.value=a+"-"+c+"-"+b.replace(/_/g," ");h=="N"&&alert("Este medicamento es NO POS");if(k==""||g=="")alert("El articulo con codigo "+a+" no tiene unidad de fraccion o fracciones por unidad de manejo. Por favor notifique a servicio farmaceutico.");if(c!="CM"&&document.getElementById("wchkconf"+l+r))document.getElementById("wchkconf"+l+r).disabled=true;else if(document.getElementById("wchkconf"+l+r))document.getElementById("wchkconf"+l+r).disabled= false;if(document.getElementById("wudosis"+l+r))document.getElementById("wudosis"+l+r).value=k;if(document.getElementById("wcundmanejo"+l+r))document.getElementById("wcundmanejo"+l+r).value=f;if(document.getElementById("wdosis"+l+r))document.getElementById("wdosis"+l+r).value=g;if(document.getElementById("whcmanejo"+l+r))document.getElementById("whcmanejo"+l+r).value=g;if(document.getElementById("whvence"+l+r))document.getElementById("whvence"+l+r).value=j;if(document.getElementById("wfftica"+l+r))document.getElementById("wfftica"+ l+r).value=e;if(document.getElementById("whdiasvence"+l+r))document.getElementById("whdiasvence"+l+r).value=m;if(document.getElementById("whdispensable"+l+r))document.getElementById("whdispensable"+l+r).value=n;if(document.getElementById("whduplicable"+l+r))document.getElementById("whduplicable"+l+r).value=q;if(document.getElementById("wdiastto"+l+r)&&parseInt(p)>0)document.getElementById("wdiastto"+l+r).value=p;else document.getElementById("wdiastto"+l+r).value="";if(document.getElementById("wdosmax"+ l+r)&&parseInt(y)>0)document.getElementById("wdosmax"+l+r).value=y;else document.getElementById("wdosmax"+l+r).value="";if(document.getElementById("wviadmon"+l+r))document.getElementById("wviadmon"+l+r).value=s;else document.getElementById("wviadmon"+l+r).value="";z&&alert("Se ha seleccionado el articulo, tenga en cuenta que este ya se encontraba en la lista.")}else alert("Debe agregar un nuevo articulo.")}else alert("No se encontro elemento a agregar.")}else alert("Aun no ha agregado el primer articulo")} function inicio(){document.location.href="generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value}function enter(){var a=true;if(document.forms.forma.whistoria.value==""){alert("Debe especificar la historia clinica del paciente");a=false}a&&document.forms.forma.submit()} function grabarKardex(){window.onbeforeunload="";var a=document.getElementById("wconfdisp").checked==true?"on":"off",b="";if(document.getElementById("ordenActual"))b=document.getElementById("ordenActual").value;if(b==""&&upload_target.document.getElementById("hdRutaOrden")){var c=upload_target.document.getElementById("hdRutaOrden").value;if(c!="")b=c}c=document.getElementById("hpestanas").value;a="generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value+"&waccion=c&whistoria="+document.forms.forma.whistoria.value+ "&ingreso="+document.forms.forma.wingreso.value+"&wfecha="+document.forms.forma.wfecha.value+"&wfechagrabacion="+document.forms.forma.wfechagrabacion.value+"&primerKardex="+document.getElementById("wkardexnuevo").value+"&rutaOrdenMedica="+b+"&confirmado="+a;if(c.indexOf("1")>=0||c.indexOf("*")>=0)a+="&talla="+document.forms.forma.txTalla.value+"&peso="+document.forms.forma.txPeso.value+"&diagnostico="+reemplazarTodo(document.forms.forma.txDiag.value,"\r","|")+"&alergias="+reemplazarTodo(document.forms.forma.txAlergias.value, "\r","|")+"&antecedentesPersonales="+reemplazarTodo(document.forms.forma.txAntecedentesPersonales.value,"\r","|");if(c.indexOf("5")>=0||c.indexOf("*")>=0)a+="&cuidadosEnfermeria="+reemplazarTodo(document.forms.forma.txCuidados.value,"\r","|")+"&terapiaRespiratoria="+reemplazarTodo(document.forms.forma.txTerapia.value,"\r","|")+"&observaciones="+reemplazarTodo(document.forms.forma.txObservaciones.value,"\r","|")+"&curaciones="+reemplazarTodo(document.forms.forma.txtCuraciones.value,"\r","|")+"&sondasCateteres="+ reemplazarTodo(document.forms.forma.txtSondas.value,"\r","|")+"&interconsulta="+reemplazarTodo(document.forms.forma.txtInterconsulta.value,"\r","|")+"&consentimientos="+reemplazarTodo(document.forms.forma.txtConsentimientos.value,"\r","|")+"&preparacionAlta="+reemplazarTodo(document.forms.forma.txtPrepalta.value,"\r","|")+"&obsDietas="+reemplazarTodo(document.forms.forma.txtObsDietas.value,"\r","|")+"&mezclas="+reemplazarTodo(document.forms.forma.txtMezclas.value,"\r","|")+"&dextrometer="+reemplazarTodo(document.forms.forma.txtDextrometer.value, "\r","|")+"&cirugiasPendientes="+reemplazarTodo(document.forms.forma.txtCirugiasPendientes.value,"\r","|")+"&terapiaFisica="+reemplazarTodo(document.forms.forma.txTerapiaFisica.value,"\r","|")+"&rehabilitacionCardiaca="+reemplazarTodo(document.forms.forma.txRehabilitacionCardiaca.value,"\r","|")+"&aislamientos="+reemplazarTodo(document.forms.forma.txAislamientos.value,"\r","|");document.location.href=a} function consultarEsquemaInsulinaElemento(a){var b=document.getElementById("cntEsquema"),c="";c="consultaAjaxKardex=05&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&codigo="+a;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(c);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status== 200){b.innerHTML=ajax.responseText;var e=document.getElementById("cntEsquema");if(e)e.style.display="block"}$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(d){}} function confirmarGeneracion(){var a=document.forms.forma.whistoria.value,b=document.forms.forma.wingreso.value,c=document.forms.forma.wfecha.value;if(a&&b)document.location.href="generarKardex.php?wemp_pmla="+document.forms.forma.wemp_pmla.value+"&waccion=b&whistoria="+a+"&wingreso="+b+"&wfecha="+c;else alert("No se encontr\u00f3 historia, ingreso y fecha en los parametros de entrada.")}function resetArticulo(){document.forms.forma.wnmmed.value=""} function quitarComponente(a){a=document.getElementById("wtxtcomponentes"+a);var b;for(b=a.length-1;b>=0;b--)a.options[b].selected&&a.remove(b)}function limpiarBuscador(){document.getElementById("cntMedicamento").innerHTML=""} function agregarArticulo(){var a=0,b="",c="",d="",e="",f="",h="",k="",g="",j="",m="",n="",q="",p="",y="",s="",v="",l="",r="",z="",A="",B="",w="",x="",t="",F="",o="",C=0,u=0;o="";for(i=0;i<document.forms.forma.wtipoprot.length;i++)if(document.forms.forma.wtipoprot[i].checked){b=document.forms.forma.wtipoprot[i].value;break}o=b;switch(b){case "N":a=elementosDetalle-1;u=elementosDetalle;break;case "A":a=elementosAnalgesia-1;u=elementosAnalgesia;break;case "U":a=elementosNutricion-1;u=elementosNutricion; break;case "Q":a=elementosQuimioterapia-1;u=elementosQuimioterapia;break;default:break}C=document.getElementById("wnmmed"+o+a);c=document.getElementById("detKardex"+o);idTabla="tbDetalle"+o;d="tr"+o+u;e="wcolmed"+o+u;f="wnmmed"+o+u;h="wdosis"+o+u;k="wcundmanejo"+o+u;g="whduplicable"+o+u;j="whdispensable"+o+u;m="whdiasvence"+o+u;n="wfftica"+o+u;q="whcmanejo"+o+u;p="whvence"+o+u;y="wcumanejo"+o+u;s="wudosis"+o+u;v="wperiod"+o+u;l="wcondicion"+o+u;r="wviadmon"+o+u;z="wfinicio"+o+u;A="btnFecha"+o+u;B= "wchkconf"+o+u;w="wchkdisp"+o+u;x="wdiastto"+o+u;t="wdosmax"+o+u;F="wtxtobs"+o+u;o="tr"+o;if(!C||C.value!=""||u==0){a=new Date;diaActual=a.getDate();mesActual=a.getMonth()+1;anioActual=a.getFullYear();horaActual=a.getHours();if(horaActual%2!=0){a.setHours(a.getHours()+1);horaActual=a.getHours()}if(mesActual&&mesActual.toString().length==1)mesActual="0"+mesActual.toString();if(diaActual&&diaActual.toString().length==1)diaActual="0"+diaActual.toString();fechaCompuesta=anioActual+"-"+mesActual+"-"+diaActual+ " a las:"+horaActual+":00";a=document.createElement("tr");a.setAttribute("id",d);d=document.createElement("td");C=document.createElement("td");var D=document.createElement("td"),M=document.createElement("td"),E=document.createElement("td"),G=document.createElement("td");G=document.createElement("td");var O=document.createElement("td"),P=document.createElement("td"),N=document.createElement("td"),Q=document.createElement("td"),R=document.createElement("td"),L=document.createElement("td");L=document.createElement("td"); N.setAttribute("align","center");L.setAttribute("align","center");C.setAttribute("id",e);e=document.createElement("a");e.setAttribute("href","#null");if(esIE)e.onclick=new Function("evt","javascript:grabarArticulo("+u+',"'+b+'");');else e.setAttribute("onClick","javascript:grabarArticulo("+u+',"'+b+'");');var I=document.createElement("img");I.setAttribute("src","../../images/medical/root/grabar.png");e.appendChild(I);I=document.createElement("a");I.setAttribute("href","#null");if(esIE)I.onclick=new Function("evt", "javascript:quitarArticulo("+u+',"'+b+'");');else I.setAttribute("onClick","javascript:quitarArticulo("+u+',"'+b+'");');var H=document.createElement("img");H.setAttribute("src","../../images/medical/root/borrar.png");I.appendChild(H);H=document.createElement("input");H.setAttribute("type","text");H.setAttribute("name",f);H.setAttribute("id",f);H.setAttribute("size","60");H.setAttribute("readOnly","readOnly");H.className="campo2";esIE?H.style.setAttribute("border","0px"):H.setAttribute("style","border:0px"); f=document.createElement("input");f.setAttribute("type","text");f.setAttribute("name",h);f.setAttribute("id",h);f.setAttribute("size","7");f.setAttribute("maxLength","7");f.className="campo2";if(esIE)f.onkeypress=new Function("evt","return validarEntradaDecimal(event);");else f.setAttribute("onKeyPress","return validarEntradaDecimal(event);");h=document.createElement("input");h.setAttribute("type","hidden");h.setAttribute("name",k);h.setAttribute("id",k);k=document.createElement("input");k.setAttribute("type", "hidden");k.setAttribute("name",q);k.setAttribute("id",q);q=document.createElement("input");q.setAttribute("type","hidden");q.setAttribute("name",p);q.setAttribute("id",p);p=document.createElement("input");p.setAttribute("type","hidden");p.setAttribute("name",n);p.setAttribute("id",n);n=document.createElement("input");n.setAttribute("type","hidden");n.setAttribute("name",m);n.setAttribute("id",m);m=document.createElement("input");m.setAttribute("type","hidden");m.setAttribute("name",j);m.setAttribute("id", j);j=document.createElement("input");j.setAttribute("type","hidden");j.setAttribute("name",g);j.setAttribute("id",g);g=document.createElement("input");g.setAttribute("type","text");g.setAttribute("name",y);g.setAttribute("id",y);g.setAttribute("size","4");g.setAttribute("disabled","disabled");g.setAttribute("maxLength","4");g.setAttribute("value","1");g.className="campo2";if(esIE)g.onkeypress=new Function("evt","return validarEntradaDecimal(event);");else g.setAttribute("onKeyPress","return validarEntradaDecimal(event);"); y=document.createElement("select");g=document.createElement("select");var J=document.createElement("select"),K=document.createElement("select");y.setAttribute("id",s);y.className="seleccion";y.setAttribute("disabled","disabled");g.setAttribute("id",v);g.className="seleccion";J.setAttribute("id",l);J.className="seleccion";K.setAttribute("id",r);K.className="seleccion";if(esIE){y.style.setAttribute("width","120px");y.style.setAttribute("style","font-family: verdana; color: black");s=document.getElementById("wmunidadesmedida").options; v=0;for(l=null;s[v];){l=document.createElement("option");y.options.add(l);l.innerText=s[v].text;l.value=s[v].value;v++}s=document.getElementById("wmperiodicidades").options;for(v=0;s[v];){l=document.createElement("option");g.options.add(l);l.innerText=s[v].text;l.value=s[v].value;v++}s=document.getElementById("wmcondicionessuministro").options;for(v=0;s[v];){l=document.createElement("option");J.options.add(l);l.innerText=s[v].text;l.value=s[v].value;v++}s=document.getElementById("wmviaadmon").options; for(v=0;s[v];){l=document.createElement("option");K.options.add(l);l.innerText=s[v].text;l.value=s[v].value;v++}}else{y.innerHTML=document.getElementById("wmunidadesmedida").innerHTML;g.innerHTML=document.getElementById("wmperiodicidades").innerHTML;J.innerHTML=document.getElementById("wmcondicionessuministro").innerHTML;K.innerHTML=document.getElementById("wmviaadmon").innerHTML;y.setAttribute("style","border:120px")}s=document.createElement("input");s.setAttribute("id",z);s.setAttribute("name", z);s.setAttribute("type","text");s.setAttribute("size","25");s.setAttribute("value",fechaCompuesta);s.setAttribute("readOnly","readonly");s.className="campo2";z=document.createElement("input");z.setAttribute("type","button");z.setAttribute("id",A);z.setAttribute("name",A);z.setAttribute("alt","Haga doble click para desplegar el calendario");z.setAttribute("value","*");if(esIE)z.onclick=new Function("evt","javascript:calendario("+u+',"'+b+'")');else z.setAttribute("onClick","javascript:calendario("+ u+',"'+b+'");');A=document.createElement("input");A.setAttribute("id",B);A.setAttribute("type","checkbox");B=document.createElement("input");B.setAttribute("id",w);B.setAttribute("type","checkbox");w=document.createElement("input");w.setAttribute("id",x);w.setAttribute("type","text");w.setAttribute("size","3");w.setAttribute("maxLength","3");w.className="campo2";if(esIE)w.onkeypress=new Function("evt","return validarEntradaEntera(event);");else w.setAttribute("onKeyPress","return validarEntradaEntera(event);"); x=document.createElement("input");x.setAttribute("id",t);x.setAttribute("type","text");x.setAttribute("size","6");x.setAttribute("maxLength","6");x.className="campo2";if(esIE)x.onkeypress=new Function("evt","return validarEntradaEntera(event);");else x.setAttribute("onKeyPress","return validarEntradaEntera(event);");t=document.createElement("textarea");t.setAttribute("id",F);t.setAttribute("rows","2");t.setAttribute("cols","10");d.appendChild(e);d.appendChild(I);C.appendChild(H);D.appendChild(f); D.appendChild(y);M.appendChild(g);E.appendChild(J);G.appendChild(s);G.appendChild(z);O.appendChild(x);P.appendChild(K);N.appendChild(A);Q.appendChild(w);R.appendChild(t);L.appendChild(B);a.appendChild(d);a.appendChild(C);a.appendChild(L);a.appendChild(D);a.appendChild(M);a.appendChild(P);a.appendChild(G);a.appendChild(E);a.appendChild(N);a.appendChild(Q);a.appendChild(O);a.appendChild(R);c.appendChild(h);c.appendChild(k);c.appendChild(q);c.appendChild(n);c.appendChild(m);c.appendChild(j);c.appendChild(p); c.appendChild(a);switch(b){case "N":elementosDetalle++;break;case "A":elementosAnalgesia++;break;case "U":elementosNutricion++;break;case "Q":elementosQuimioterapia++;break;default:break}u++;for(b=0;document.getElementById(o+b);)b++;document.getElementById(idTabla).moveRow(eval(u),1)}if(document.getElementById("wbnommed")){document.getElementById("wbnommed").focus();document.getElementById("wbnommed").select()}} function agregarInfusion(){var a=true,b=new Date;diaActual=b.getDate();mesActual=b.getMonth()+1;anioActual=b.getFullYear();if(mesActual&&mesActual.toString().length==1)mesActual="0"+mesActual.toString();if(diaActual&&diaActual.toString().length==1)diaActual="0"+diaActual.toString();fechaCompuesta=anioActual+"-"+mesActual+"-"+diaActual;if(cuentaInfusiones>0){var c=document.getElementById("wtxtcomponentes"+(cuentaInfusiones-1));if(c&&c.length)if(c.length==0)a=false}if(a){a=document.getElementById("detInfusiones"); cuentaInfusiones++;b=document.createElement("tr");b.setAttribute("id","trIn"+cuentaInfusiones);var d=document.createElement("td"),e=document.createElement("td"),f=document.createElement("td"),h=document.createElement("td");e.setAttribute("align","center");var k=document.createElement("a");k.setAttribute("href","#null");if(esIE)k.onclick=new Function("evt","javascript:grabarInfusion("+cuentaInfusiones+");");else k.setAttribute("onClick","javascript:grabarInfusion("+cuentaInfusiones+");");c=document.createElement("img"); c.setAttribute("src","../../images/medical/root/grabar.png");k.appendChild(c);var g=document.createElement("a");g.setAttribute("href","#null");if(esIE)g.onclick=new Function("evt","javascript:quitarInfusion("+cuentaInfusiones+");");else g.setAttribute("onClick","javascript:quitarInfusion("+cuentaInfusiones+");");c=document.createElement("img");c.setAttribute("src","../../images/medical/root/borrar.png");g.appendChild(c);var j=document.createElement("input");j.setAttribute("id","wfliq"+cuentaInfusiones); j.setAttribute("name","wfliq"+cuentaInfusiones);j.setAttribute("type","text");j.setAttribute("size","10");j.setAttribute("value",fechaCompuesta);j.setAttribute("readOnly","readonly");j.className="campo2";var m=document.createElement("input");m.setAttribute("type","button");m.setAttribute("id","btnFechaLiq"+cuentaInfusiones);m.setAttribute("name","btnFechaLiq"+cuentaInfusiones);m.setAttribute("alt","Haga doble click para desplegar el calendario");m.setAttribute("value","*");if(esIE)m.onclick=new Function("evt", "javascript:calendario4("+cuentaInfusiones+")");else m.setAttribute("onClick","javascript:calendario4("+cuentaInfusiones+");");c=document.createElement("select");c.setAttribute("id","wtxtcomponentes"+cuentaInfusiones);c.setAttribute("multiple","multiple");c.setAttribute("size","5");if(esIE)c.ondblclick=new Function("evt","quitarComponente("+cuentaInfusiones+");");else c.setAttribute("onDblClick","javascript:quitarComponente("+cuentaInfusiones+");");var n=document.createElement("textarea");n.setAttribute("id", "wobscomponentes"+cuentaInfusiones);n.setAttribute("rows","2");n.setAttribute("cols","60");if(esIE)n.onkeypress=new Function("evt","return validarEntradaAlfabetica(event);");else n.setAttribute("onKeyPress","return validarEntradaAlfabetica(event);");d.appendChild(k);d.appendChild(g);e.appendChild(j);e.appendChild(m);f.appendChild(c);h.appendChild(n);b.appendChild(d);b.appendChild(e);b.appendChild(f);b.appendChild(h);a.appendChild(b);cuentaInfusiones++}else alert("Por favor ingrese los componentes del liquido endovenoso antes de crear uno nueva.")} function agregarExamen(){var a=document.getElementById("detExamenes"),b=new Date;diaActual=b.getDate();mesActual=b.getMonth()+1;anioActual=b.getFullYear();if(mesActual&&mesActual.toString().length==1)mesActual="0"+mesActual.toString();if(diaActual&&diaActual.toString().length==1)diaActual="0"+diaActual.toString();fechaCompuesta=anioActual+"-"+mesActual+"-"+diaActual;b=document.createElement("tr");b.setAttribute("id","trEx"+cuentaExamenes);var c=document.createElement("td"),d=document.createElement("td"), e=document.createElement("td"),f=document.createElement("td"),h=document.createElement("td");h.setAttribute("align","center");var k=document.createElement("a");k.setAttribute("href","#null");if(esIE)k.onclick=new Function("evt","javascript:grabarExamen("+cuentaExamenes+");");else k.setAttribute("onClick","javascript:grabarExamen("+cuentaExamenes+");");var g=document.createElement("img");g.setAttribute("src","../../images/medical/root/grabar.png");k.appendChild(g);g=document.createElement("a");g.setAttribute("href", "#null");if(esIE)g.onclick=new Function("evt","javascript:quitarExamen("+cuentaExamenes+");");else g.setAttribute("onClick","javascript:quitarExamen("+cuentaExamenes+");");var j=document.createElement("img");j.setAttribute("src","../../images/medical/root/borrar.png");g.appendChild(j);j=document.createElement("select");var m=document.createElement("select");j.setAttribute("id","wexamenlab"+cuentaExamenes);j.className="seleccion";m.setAttribute("id","westadoexamen"+cuentaExamenes);m.className="seleccion"; if(esIE){for(var n=document.getElementById("wmexamenlab").options,q=0,p=null;n[q];){p=document.createElement("option");j.options.add(p);p.innerText=n[q].text;p.value=n[q].value;q++}n=document.getElementById("wmestadosexamenlab").options;for(q=0;n[q];){p=document.createElement("option");m.options.add(p);p.innerText=n[q].text;p.value=n[q].value;q++}}else{n=document.getElementById("wmexamenlab");n=document.getElementById("wmestadosexamenlab");j.innerHTML=document.getElementById("wmexamenlab").innerHTML; m.innerHTML=document.getElementById("wmestadosexamenlab").innerHTML}n=document.createElement("textarea");n.setAttribute("id","wtxtobsexamen"+cuentaExamenes);n.setAttribute("rows","2");n.setAttribute("cols","60");if(esIE)n.onkeypress=new Function("evt","return validarEntradaAlfabetica(event);");else n.setAttribute("onKeyPress","return validarEntradaAlfabetica(event);");q=document.createElement("input");q.setAttribute("id","wfsol"+cuentaExamenes);q.setAttribute("name","wfsol"+cuentaExamenes);q.setAttribute("type", "text");q.setAttribute("size","10");q.setAttribute("value",fechaCompuesta);q.setAttribute("readOnly","readonly");q.className="campo2";p=document.createElement("input");p.setAttribute("type","button");p.setAttribute("id","btnFechaSol"+cuentaExamenes);p.setAttribute("name","btnFechaSol"+cuentaExamenes);p.setAttribute("alt","Haga doble click para desplegar el calendario");p.setAttribute("value","*");if(esIE)p.onclick=new Function("evt","javascript:calendario3("+cuentaExamenes+")");else p.setAttribute("onClick", "javascript:calendario3("+cuentaExamenes+");");c.appendChild(k);c.appendChild(g);d.appendChild(j);e.appendChild(n);f.appendChild(m);h.appendChild(q);h.appendChild(p);b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(h);b.appendChild(f);a.appendChild(b);cuentaExamenes++} function adicionarMedico(){if(document.forms.forma.wselmed&&document.forms.forma.wselmed.value!=""){var a=document.getElementById("wselmed"),b=a.value,c=document.forms.forma.whistoria.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.wfechagrabacion.value,f=document.forms.forma.usuario.value,h=a.value.split("-");a=h[0];var k=h[1],g=h[2];h=h[3];var j=document.getElementById("wchkmedint").checked?"on":"off";insertarMedicoTratante(b,a,k,c,d,e,j,f,h,g)}else alert("Debe seleccionar un m\u00e9dico")} function adicionarDieta(){if(document.forms.forma.wseldieta&&document.forms.forma.wseldieta.value!=""){var a=document.getElementById("wseldieta"),b=a.value;a=a.options[a.selectedIndex].text;var c=document.forms.forma.colDietas,d=document.forms.forma.wfechagrabacion.value,e=document.forms.forma.whistoria.value,f=document.forms.forma.wingreso.value,h=document.forms.forma.usuario.value,k=document.getElementById("cntDietas"),g=document.getElementById("Die"+b);if((c[b]==null||c[b]=="")&&!g){k.innerHTML+= "<span id='Die"+b+"' class=vinculo><a onClick=\"javascript:quitarDieta('"+b+'\');" href="#null">'+a+"</a><br/></span>";c[b]=a;insertarDietaKardex(b,e,f,d,h)}else alert("La dieta ya se encuentra asociada")}else alert("Debe seleccionar una dieta.")} function quitarDieta(a){var b=document.forms.forma.wfecha.value,c=document.forms.forma.whistoria.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.usuario.value;confirm("Desea quitar la dieta seleccionada?")&&eliminarDietaElemento(c,d,b,e,a);return false} function grabarInfusion(a){for(var b=document.forms.forma.whistoria.value,c=document.forms.forma.wingreso.value,d=document.forms.forma.wfechagrabacion.value,e=document.getElementById("wfliq"+a).value,f=document.getElementById("wtxtcomponentes"+a),h=document.getElementById("wobscomponentes"+a).value,k=document.forms.forma.usuario.value,g="",j=0;j<f.length;){g+=f.options[j].value+"-"+f.options[j].text+";";j++}if(g=="")g=f.value;grabarInfusionElemento(b,c,d,g,a,h,k,a,e)} function quitarArticulo(a,b){var c=document.getElementById("wnmmed"+b+a),d=document.forms.forma.whistoria.value,e=document.forms.forma.wingreso.value,f=document.forms.forma.wfecha.value,h=document.forms.forma.usuario.value;if(document.getElementById("whfinicio"+b+a)){var k=document.getElementById("whfinicio"+b+a).value.split("a las:"),g=k[0];k=k[1]}var j="";j=c.tagName=="INPUT"?c.value:c.innerHTML;c=j.split("-")[0];if(c==""){c=document.getElementById("detKardex"+b);a=document.getElementById("tr"+ b+a);c.removeChild(a);elementosDetalle--}else if(confirm("Esta seguro de eliminar el articulo "+j+"?")){eliminarArticuloElemento(d,e,f,c,h,a,g,k,b);elementosDetalle--}}function quitarInfusion(a){var b=document.forms.forma.whistoria.value,c=document.forms.forma.wfecha.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.usuario.value;confirm("Esta seguro de quitar el liquido endovenoso # "+a+"?")&&eliminarInfusionElemento(b,d,c,e,a)} function quitarExamen(a){var b=document.getElementById("wexamenlab"+a).value,c=document.forms.forma.wfecha.value,d=document.forms.forma.whistoria.value,e=document.forms.forma.wingreso.value,f=document.forms.forma.usuario.value;confirm("Esta seguro de eliminar el examen?")&&eliminarExamenElemento(d,e,b,c,f,a)} function grabarArticulo(a,b){var c=document.forms.forma.whistoria.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.wfechagrabacion.value,f=document.getElementById("wnmmed"+b+a),h=document.getElementById("wdosis"+b+a),k=document.getElementById("wudosis"+b+a),g=document.getElementById("wperiod"+b+a),j=g.value.substring(1,g.value.length),m=document.getElementById("wcondicion"+b+a),n=document.getElementById("wfftica"+b+a),q=document.getElementById("wfinicio"+b+a),p=document.getElementById("wfinicio"+ b+a),y=document.getElementById("wviadmon"+b+a),s=document.getElementById("wchkconf"+b+a),v=document.getElementById("wdiastto"+b+a),l=document.getElementById("wdosmax"+b+a),r=document.getElementById("wtxtobs"+b+a),z=document.forms.forma.usuario.value,A=document.getElementById("wkardexnuevo")&&document.getElementById("wkardexnuevo").value=="S"?"S":"N",B=document.getElementById("wcundmanejo"+b+a)?document.getElementById("wcundmanejo"+b+a).value:"",w=document.getElementById("whvence"+b+a)&&document.getElementById("whvence"+ b+a).value=="on"?true:false;w=document.getElementById("whcmanejo"+b+a)?document.getElementById("whcmanejo"+b+a).value:"";w=document.getElementById("wchkdisp"+b+a);var x=0;j=parseFloat(j);x="";x=f.tagName=="INPUT"?f.value.split("-"):f.innerHTML.split("-");f=x[0];x=x[1];p=q.value.split("a las:");q=p[0];p=p[1];var t=p.split(":")[0];t=true;if(!f||f==""){alert("Debe ingresar el codigo del articulo");t=false}if(t&&(!h||h.value=="")){alert("Debe ingresar la cantidad de dosis a suministrar");t=false}if(t&& eval(h.value)<=0){alert("La cantidad de dosis debe ser mayor que cero");t=false}if(t&&(!k||k.value=="")){alert("Debe seleccionar la unidad de dosis a suministrar");t=false}if(t&&(!g||g.value=="")){alert("Debe seleccionar la frecuencia con la que se debe suministrar");t=false}if(t&&(!n||n.value=="")){alert("Debe ingresar la forma farmaceutica");t=false}if(t&&(!q||q=="")){alert("Debe ingresar la fecha de inicio del tratamiento");t=false}if(t&&(!p||p=="")){alert("Debe ingresar la hora de inicio del tratamiento"); t=false}if(t&&(!y||y.value=="")){alert("Debe seleccionar la v\u00eda de administraci\u00f3n");t=false}if(t&&!esFechaMayorIgual(q,e)){alert("La fecha de inicio de administraci\u00f3n del art\u00edculo debe ser mayor o igual a la fecha actual");t=false}var F=(new Date).getHours();F=q;var o=p,C=false,u=false;if(s&&s.checked)C=true;if(w&&w.checked)u=true;t&&grabarArticuloElemento(c,d,e,f,h.value,k.value,g.value,n.value,q,p,y.value,C,v.value,r.value,x,z,m.value,l.value,0,B,1,A,j,F,o,u,b,a)} function grabarArticuloSinValidacion(a,b){var c=document.forms.forma.whistoria.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.wfechagrabacion.value,f=document.getElementById("wnmmed"+b+a),h=document.getElementById("wdosis"+b+a),k=document.getElementById("wudosis"+b+a),g=document.getElementById("wperiod"+b+a),j=g.value.substring(1,g.value.length),m=document.getElementById("wcondicion"+b+a),n=document.getElementById("wfftica"+b+a),q=document.getElementById("wfinicio"+b+a),p=document.getElementById("wfinicio"+ b+a),y=document.getElementById("wviadmon"+b+a),s=document.getElementById("wchkconf"+b+a),v=document.getElementById("wdiastto"+b+a),l=document.getElementById("wdosmax"+b+a),r=document.getElementById("wtxtobs"+b+a),z=document.forms.forma.usuario.value,A=document.getElementById("wkardexnuevo")&&document.getElementById("wkardexnuevo").value=="S"?"S":"N",B=document.getElementById("wcundmanejo"+b+a).value,w=document.getElementById("whvence"+b+a).value=="on"?true:false;w=document.getElementById("whcmanejo"+ b+a).value;w=document.getElementById("wchkdisp"+b+a);var x=0;j=parseFloat(j);var t=document.getElementById("whfinicio"+b+a).value.split("a las:");x=t[0];t=t[1];var F="";F=f.tagName=="INPUT"?f.value.split("-"):f.innerHTML.split("-");f=F[0];F=F[1];p=q.value.split("a las:");q=p[0];p=p[1];var o=true;if(!f||f==""){alert("Debe ingresar el codigo del articulo");o=false}if(o&&(!h||h.value=="")){alert("Debe ingresar la cantidad de dosis a suministrar");o=false}if(o&&eval(h.value)<=0){alert("La cantidad de dosis debe ser mayor que cero"); o=false}if(o&&(!k||k.value=="")){alert("Debe seleccionar la unidad de dosis a suministrar");o=false}if(o&&(!g||g.value=="")){alert("Debe seleccionar la frecuencia con la que se debe suministrar");o=false}if(o&&(!n||n.value=="")){alert("Debe ingresar la forma farmaceutica");o=false}if(o&&(!q||q=="")){alert("Debe ingresar la fecha de inicio del tratamiento");o=false}if(o&&(!p||p=="")){alert("Debe ingresar la hora de inicio del tratamiento");o=false}if(o&&(!y||y.value=="")){alert("Debe seleccionar la v\u00eda de administraci\u00f3n"); o=false}var C=false,u=false;if(s&&s.checked)C=true;if(w&&w.checked)u=true;o&&grabarArticuloElemento(c,d,e,f,h.value,k.value,g.value,n.value,q,p,y.value,C,v.value,r.value,F,z,m.value,l.value,0,B,1,A,j,x,t,u,b,a)} function grabarArticuloPerfil(a){var b=document.forms.forma.whistoria.value,c=document.forms.forma.wingreso.value,d=document.forms.forma.wfechagrabacion.value,e=document.getElementById("wnmmedact"+a),f=document.getElementById("wnmmed"+(a-1)),h=document.getElementById("wdiastto"+a),k=document.getElementById("wdosmax"+a),g=document.getElementById("wtxtobs"+a),j=document.getElementById("wviadmon"+a),m=document.getElementById("whfinicio"+a),n=document.getElementById("wchkpri"+a)&&document.getElementById("wchkpri"+ a).checked==true?"on":"off",q=document.forms.forma.usuario.value,p=document.getElementById("wudosis"+(a-1)).value,y=document.getElementById("wfftica"+(a-1)).value,s="";s=e.tagName=="INPUT"?e.value.split("-"):e.innerHTML.split("-");e=s[0];var v=s[1];v="";v=f.tagName=="INPUT"?f.value.split("-"):f.innerHTML.split("-");f=m.value.split("a las:");m=f[0];var l=f[1];f=v[0];var r=v[1],z=true;if(!e||e==""){alert("No se captur\u00f3 el codigo del articulo actual");z=false}if(z&&f&&f!="")if(confirm("Esta seguro de reemplazar el art\u00edculo "+ e+"-"+s[2]+" con "+document.getElementById("wnmmed"+(a-1)).value+"?")){var A="",B=1;for(A=document.getElementById("wnmmedact"+B);A;){if(A&&A.innerHTML!=""){A=A.innerHTML.split("-");if(A[0]==f){alert("No se puede reemplazar el articulo "+s[2]+" por el articulo "+v[2]+" este ya se encuentra en la lista de art\u00edculos.");z=false;break}}B++;A=document.getElementById("wnmmedact"+B)}}else z=false;z&&grabarArticuloPerfilElemento(b,c,d,e,f,h.value,g.value,q,a,p,y,r,j.value,k.value,n,m,l)} function grabarExamen(a){var b=document.forms.forma.whistoria.value,c=document.forms.forma.wingreso.value,d=document.forms.forma.wfechagrabacion.value,e=document.getElementById("wexamenlab"+a).value,f=document.getElementById("wexamenlab"+a).text,h=document.getElementById("wtxtobsexamen"+a).value,k=document.getElementById("westadoexamen"+a).value,g=document.getElementById("wfsol"+a).value,j=document.forms.forma.usuario.value,m=true;if(e==""){alert("Debe especificar un examen");m=false}m&&grabarExamenElemento(e, f,b,c,d,h,k,g,j,a)} function consultarMedicamento(){var a=document.getElementById("cntMedicamento"),b=document.getElementById("wunidadmed"),c="",d="",e="",f="";if(document.forms.forma.centroCostosUsuario)e=document.forms.forma.centroCostosUsuario.value;if(document.forms.forma.whgrupos)f=document.forms.forma.whgrupos.value;var h="";for(h=h=0;h<document.forms.forma.wtipoart.length;h++)if(document.forms.forma.wtipoart[h].checked){c=document.forms.forma.wtipoart[h].value;break}for(h=0;h<document.forms.forma.wtipoprot.length;h++)if(document.forms.forma.wtipoprot[h].checked){d=document.forms.forma.wtipoprot[h].value; break}h=document.forms.forma.wnommed.value==""?"consultaAjaxKardex=02&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&codigo="+document.forms.forma.wcodmed.value.replace(/%/,"-")+"&tipoMedicamento="+c+"&unidadMedida="+b.value+"&centroCostos="+e+"&gruposMedicamentos="+f+"&tipoProtocolo="+d:"consultaAjaxKardex=03&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&nombre="+document.forms.forma.wnommed.value.replace(/%/, "-")+"&tipoMedicamento="+c+"&unidadMedida="+b.value+"&centroCostos="+e+"&gruposMedicamentos="+f+"&tipoProtocolo="+d;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(h);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200)a.innerHTML=ajax.responseText;$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(k){}} function consultarMedicamentoPerfil(){var a=document.getElementById("cntMedicamento"),b=document.getElementById("imgCodMed"),c="";if(document.forms.forma.centroCostosUsuario)c=document.forms.forma.centroCostosUsuario.value;var d="";b.style.display="block";for(d=d=0;d<document.forms.forma.wtipoart.length;d++)if(document.forms.forma.wtipoart[d].checked)break;d=document.forms.forma.wtipoart[d].value;var e=document.getElementById("wunidadmed");d=document.forms.forma.wnommed.value==""?"consultaAjaxKardex=02&wemp_pmla="+ document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&codigo="+document.forms.forma.wcodmed.value.replace(/%/,"-")+"&tipoMedicamento="+d+"&unidadMedida="+e.value+"&centroCostos="+c+"&gruposMedicamentos=*":"consultaAjaxKardex=03&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&nombre="+document.forms.forma.wnommed.value.replace(/%/,"-")+"&tipoMedicamento="+d+"&unidadMedida="+e.value+"&centroCostos="+c+"&gruposMedicamentos=*"; try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(d);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){a.innerHTML=ajax.responseText;b.style.display="none"}$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(f){}} function consultarComponente(){var a=document.getElementById("cntComponente"),b=document.getElementById("imgCodCom"),c="";for(c=c=0;c<document.forms.forma.wtipocom.length;c++)if(document.forms.forma.wtipocom[c].checked)break;c=document.forms.forma.wtipocom[c].value;var d=document.getElementById("wunidadcom");c=document.forms.forma.wnomcom.value==""?"consultaAjaxKardex=09&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&codigo="+document.forms.forma.wcodcom.value+ "&tipoMedicamento="+c+"&unidadMedida="+d.value:"consultaAjaxKardex=10&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&nombre="+document.forms.forma.wnomcom.value+"&tipoMedicamento="+c+"&unidadMedida="+d.value;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(c);ajax.onreadystatechange=function(){if(ajax.readyState== 4&&ajax.status==200){a.innerHTML=ajax.responseText;b.style.display="none"}$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(e){}} function grabarEsquemaDextrometerElemento(a,b,c,d,e,f,h,k,g,j,m,n){var q="";q=n==true?"on":"off";var p="";p="consultaAjaxKardex=22&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&usuario="+m+"&fecha="+c+"&codInsulina="+d+"&frecuencia="+e+"&codEsquema="+f+"&arrDosis="+h+"&arrUDosis="+k+"&arrVia="+g+"&arrObservaciones="+j+"&actualizaIntervalos="+q;var y="";try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST", "../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(p);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200)switch(ajax.responseText){case "1":y="Esquema dextrometer modificado con exito";break;default:y="No se pudo grabar el esquema dextrometer";break}if(n)if(document.getElementById("cntEsquemaActual"))document.getElementById("cntEsquemaActual").style.display="none";if(document.getElementById("btnQuitarEsquema"))document.getElementById("btnQuitarEsquema").disabled= false;$.unblockUI();$.growlUI("",y)};estaEnProceso(ajax)||ajax.send(null)}catch(s){}} function insertarMedicoTratante(a,b,c,d,e,f,h,k,g,j){var m=document.getElementById("cntMedicos"),n="";n="consultaAjaxKardex=06&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&tipoDocumento="+b+"&numeroDocumento="+c+"&historia="+d+"&ingreso="+e+"&usuario="+k+"&idRegistro="+a+"&fecha="+f+"&interconsultante="+h+"&codigoEspecialidad="+g;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php", true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(n);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){switch(ajax.responseText){case "1":alert("El medico tratante ya se encontraba asociado");break;case "2":var p=b+c+g;m.innerHTML+=h=="on"?"<span id='Med"+p+"' class='vinculo'><a href='#null' onClick='javascript:quitarMedico(\""+b+"-"+c+"-"+g+"\");'>"+j+"(Interconsulta)</a><br/></span>":"<span id='Med"+p+"' class='vinculo'><a href='#null' onClick='javascript:quitarMedico(\""+ b+"-"+c+"-"+g+"\");'>"+j+"</a><br/></span>";break;default:alert("No se pudo asociar el medico tratante");break}$.unblockUI()}};estaEnProceso(ajax)||ajax.send(null)}catch(q){}} function insertarDietaKardex(a,b,c,d,e){var f=document.getElementById("cntMedicamento"),h="";h="consultaAjaxKardex=14&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+b+"&ingreso="+c+"&usuario="+e+"&idRegistro="+a+"&fecha="+d;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(h);ajax.onreadystatechange= function(){if(ajax.readyState==4&&ajax.status==200)f.innerHTML=ajax.responseText;$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(k){}} function grabarInfusionElemento(a,b,c,d,e,f,h,k,g){var j="";j="consultaAjaxKardex=11&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+c+"&componentes="+d+"&consecutivo="+e+"&usuario="+h+"&observaciones="+f+"&fechaSolicitud="+g;var m="";try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); ajax.send(j);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){if(ajax.responseText=="0")m="No se pudo grabar el liquido endovenoso";if(ajax.responseText=="1"){document.getElementById("trIn"+k).className="fila1";m="El liquido endovenoso se ha grabado correctamente"}if(ajax.responseText=="2")m="El liquido endovenoso se ha modificado correctamente"}$.unblockUI();$.growlUI("",m)};estaEnProceso(ajax)||ajax.send(null)}catch(n){}} function grabarArticuloElemento(a,b,c,d,e,f,h,k,g,j,m,n,q,p,y,s,v,l,r,z,A,B,w,x,t,F,o,C){var u="",D="";u="consultaAjaxKardex=01&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&codArticulo="+d+"&cantDosis="+e+"&unDosis="+f+"&per="+h+"&fmaFtica="+k+"&fini="+g+"&hini="+j+"&dosMax="+l+"&via="+m+"&conf="+n+"&dtto="+q+"&obs="+p+"&usuario="+s+"&fechaKardex="+c+"&origenArticulo="+y+"&condicion="+v+"&cantGrabar="+r+"&unidadManejo="+ z+"&cantidadManejo="+A+"&primerKardex="+B+"&horasFrecuencia="+w+"&fIniAnt="+x.replace(" ","")+"&hIniAnt="+t+"&noDispensar="+F+"&tipoProtocolo="+o;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(u);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){respuesta=ajax.responseText.split("*");$.unblockUI();switch(respuesta[0]){case "0":D= "No se pudo guardar la informacion del articulo";alert(D);break;case "1":var E=document.getElementById("wnmmed"+o+C),G="";G=E.tagName=="DIV"?E.innerHTML:E.value;if(E=document.getElementById("wcolmed"+o+C))E.innerHTML="<div id='wnmmed"+o+C+"' class='campo2'>"+G+"</div>";document.getElementById("tr"+o+C).className="fila1";D="El articulo se ha creado correctamente";$.growlUI("",D);break;case "2":E=document.getElementById("wnmmed"+o+C);G=E.tagName=="DIV"?E.innerHTML:E.value;if((E=document.getElementById("wcolmed"+ o+C))&&G!="undefined")E.innerHTML="<div id='wnmmed"+o+C+"' class='campo2'>"+G+"</div>";D="El articulo se ha modificado correctamente";$.growlUI("",D);break;case "3":D="El articulo no se puede modificar si se encuentra suspendido.";alert(D);break;case "4":D="El articulo se modific\u00f3 correctamente, tenga en cuenta que ya estaba dispensado completamente.";G=(respuesta[1]?respuesta[1]:0)-(respuesta[2]?respuesta[2]:0);D+="\n-Se genero un ";D+=G>=0?"sobrante de ":"faltante de ";D+=Math.abs(G);alert(D); break;default:D="No especificado: "+ajax.responseText;alert(D);break}if(document.getElementById("whfinicio"+o+C))document.getElementById("whfinicio"+o+C).value=g+" a las:"+j}};estaEnProceso(ajax)||ajax.send(null)}catch(M){}} function grabarArticuloPerfilElemento(a,b,c,d,e,f,h,k,g,j,m,n,q,p,y,s,v){var l="",r="";l=e&&e!=""?"consultaAjaxKardex=18&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&codArticulo="+d+"&dtto="+f+"&obs="+h+"&usuario="+k+"&fechaKardex="+c+"&codArticuloNuevo="+e+"&unidadDosis="+j+"&formaFarm="+m+"&origen="+n:"consultaAjaxKardex=17&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+ "&historia="+a+"&ingreso="+b+"&codArticulo="+d+"&dtto="+f+"&obs="+h+"&usuario="+k+"&fechaKardex="+c+"&via="+q+"&dosisMaximas="+p+"&prioridad="+y+"&fechaInicio="+s+"&horaInicio="+v;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(l);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200)switch(ajax.responseText){case "0":r= "No se pudo modificar el art\u00edculo.";break;case "1":var A=document.getElementById("wnmmed"+(g-1)),B=document.getElementById("wffticaact"+g),w=document.getElementById("wudosisact"+g),x=A.value,t="";document.getElementById("wnmmedact"+g).innerHTML=x;if(m&&m!=""){t=document.getElementById("wmfftica").options;for(x=0;t[x];){if(t[x].value==m){B.innerHTML=t[x].text;break}x++}}else B.innerHTML="Sin forma farmaceutica";if(j&&j!=""){t=document.getElementById("wmunidadesmedida").options;for(x=0;t[x];){if(t[x].value== j){w.innerHTML=t[x].text;break}x++}}else w.innerHTML="Sin unidad de medida";A.value="";r="El art\u00edculo se ha reemplazado correctamente.";break;case "2":r="El art\u00edculo se ha modificado correctamente.";break;case "3":r="El art\u00edculo no se puede modificar si se encuentra suspendido.";break;default:r="No especificado: "+ajax.responseText;break}$.unblockUI();$.growlUI("",r)};estaEnProceso(ajax)||ajax.send(null)}catch(z){}} function suspenderArticulo(a,b){var c=document.forms.forma.whistoria.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.wfechagrabacion.value,f=document.forms.forma.usuario.value,h=document.getElementById("tr"+b+a),k="on",g=document.getElementById("wnmmed"+b+a);a=document.getElementById("wfinicio"+b+a);var j=a.value.split("a las:");a=j[0];horaInicio=j[1];j="";j=g.tagName=="INPUT"?g.value.split("-"):g.innerHTML.split("-");k=h.className=="suspendido"?"off":"on";g=j[0];if(confirm("\u00bfDesea cambiar la suspensi\u00f3n/activaci\u00f3n de la administraci\u00f3n del medicamento?")){var m= j="";j="consultaAjaxKardex=16&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+c+"&ingreso="+d+"&codigoArticulo="+g+"&usuario="+f+"&fecha="+e+"&estado="+k+"&fechaInicio="+a+"&horaInicio="+horaInicio+"&tipoProtocolo="+b;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(j);ajax.onreadystatechange= function(){if(ajax.readyState==4&&ajax.status==200)if(ajax.responseText=="1")if(k=="on"){h.className="suspendido";m="El medicamento se ha suspendido."}else{h.className="";m="El medicamento se ha activado."}else m="No se pudo modificar estado suspension: "+ajax.responseText;$.unblockUI();$.growlUI("",m)};estaEnProceso(ajax)||ajax.send(null)}catch(n){}}} function grabarExamenElemento(a,b,c,d,e,f,h,k,g,j){var m="",n="";m="consultaAjaxKardex=7&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+c+"&ingreso="+d+"&fecha="+e+"&codigoExamen="+a+"&observaciones="+f+"&estado="+h+"&usuario="+g+"&nombreExamen="+b+"&fechaDeSolicitado="+k;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); ajax.send(m);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){if(ajax.responseText=="0")n="No se pudo grabar el examen";if(ajax.responseText=="1"){document.getElementById("trEx"+j).className="fila1";n="El examen se ha grabado correctamente"}if(ajax.responseText=="2")n="El examen se ha modificado correctamente"}$.unblockUI();$.growlUI("",n)};estaEnProceso(ajax)||ajax.send(null)}catch(q){}} function grabarAprobacionRegente11(a){a="";a=document.forms.forma.whistoria.value;var b=document.forms.forma.wingreso.value,c=document.forms.forma.wfechagrabacion.value,d=document.forms.forma.usuario.value,e=document.getElementById("wchkapr").checked?"on":"off",f="";a="consultaAjaxKardex=20&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&usuario="+d+"&fecha="+c+"&estado="+e;try{$.blockUI({message:$("#msjEspere")}); ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(a);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200)switch(ajax.responseText){case "0":f="No se pudo grabar la aprobaci\u00f3n del regente";break;case "1":f=document.getElementById("wchkapr").checked?"El perfil se aprob\u00f3 por el regente.":"El perfil NO se aprob\u00f3 por el regente.";break;default:f="No especificado: "+ ajax.responseText;break}$.unblockUI();$.growlUI("",f)};estaEnProceso(ajax)||ajax.send(null)}catch(h){}}function quitarMedico(a){var b=document.forms.forma.wfecha.value,c=document.forms.forma.whistoria.value,d=document.forms.forma.wingreso.value,e=document.forms.forma.usuario.value;confirm("Desea quitar el medico seleccionado?")&&eliminarMedicoElemento(c,d,b,e,a);return false} function quitarAlergia(a){var b=document.forms.forma.whistoria.value,c=document.forms.forma.wingreso.value,d=document.forms.forma.usuario.value;confirm("Desea quitar la alergia seleccionada?")&&eliminarAlergiaElemento(b,c,a,d)} function eliminarMedicoElemento(a,b,c,d,e){var f="",h="";f="consultaAjaxKardex=13&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+c+"&idRegistro="+e+"&usuario="+d;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(f);ajax.onreadystatechange=function(){if(ajax.readyState== 4&&ajax.status==200){var g=ajax.responseText;if(ajax.responseText==1){g=document.getElementById("cntMedicos");var j=document.getElementById("Med"+reemplazarTodo(e,"-",""));g.removeChild(j);h="El medico tratante se ha retirado con exito"}if(ajax.responseText==0)h="No se pudo eliminar el medico"}$.unblockUI();$.growlUI("",h)};estaEnProceso(ajax)||ajax.send(null)}catch(k){}} function eliminarAlergiaElemento(a,b,c,d){var e="",f="";e="consultaAjaxKardex=21&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+c+"&usuario="+d+"&descripcion=";try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(e);ajax.onreadystatechange=function(){if(ajax.readyState== 4&&ajax.status==200){if(ajax.responseText==1){var k=document.getElementById("detAlergias"),g=document.getElementById("trAle"+c);k.removeChild(g);f="La alergia ha sido eliminada con exito"}if(ajax.responseText==0)f="No se pudo modificar la alergia"}$.unblockUI();$.growlUI("",f)};estaEnProceso(ajax)||ajax.send(null)}catch(h){}} function eliminarDietaElemento(a,b,c,d,e){var f="",h="";f="consultaAjaxKardex=15&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+c+"&idRegistro="+e+"&usuario="+d;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(f);ajax.onreadystatechange=function(){if(ajax.readyState== 4&&ajax.status==200){if(ajax.responseText==1){var g=document.getElementById("cntDietas"),j=document.getElementById("Die"+e);g.removeChild(j);document.forms.forma.colDietas[e]="";h="La dieta se ha retirado con exito"}if(ajax.responseText==0)h="No se pudo eliminar la dieta"}$.unblockUI();$.growlUI("",h)};estaEnProceso(ajax)||ajax.send(null)}catch(k){}} function eliminarArticuloElemento(a,b,c,d,e,f,h,k,g){a="consultaAjaxKardex=04&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&codArticulo="+d+"&fecha="+c+"&usuario="+e+"&fechaInicio="+h+"&horaInicio="+k+"&tipoProtocolo="+g;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); ajax.send(a);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){var m=document.getElementById("detKardex"+g),n=document.getElementById("tr"+g+f);m.removeChild(n)}$.unblockUI()};estaEnProceso(ajax)||ajax.send(null)}catch(j){}} function eliminarInfusionElemento(a,b,c,d,e){var f="";f="consultaAjaxKardex=12&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+c+"&usuario="+d+"&consecutivo="+e;try{ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(f);ajax.onreadystatechange=function(){if(ajax.readyState==4&&ajax.status==200){var k= document.getElementById("detInfusiones"),g=document.getElementById("trIn"+e);k.removeChild(g)}};estaEnProceso(ajax)||ajax.send(null)}catch(h){}} function eliminarExamenElemento(a,b,c,d,e,f){var h="",k="";h="consultaAjaxKardex=8&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+d+"&codExamen="+c+"&usuario="+e;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(h);ajax.onreadystatechange=function(){if(ajax.readyState== 4&&ajax.status==200){if(ajax.responseText==1){var j=document.getElementById("detExamenes"),m=document.getElementById("trEx"+f);j.removeChild(m)}if(ajax.responseText==0)k="No se pudo eliminar el examen"}$.unblockUI();$.growlUI("",k)};estaEnProceso(ajax)||ajax.send(null)}catch(g){}} function eliminarEsquemaDextrometerElemento(a,b,c,d,e){var f="",h="";f="consultaAjaxKardex=23&wemp_pmla="+document.forms.forma.wemp_pmla.value+"&basedatos="+document.forms.forma.wbasedato.value+"&historia="+a+"&ingreso="+b+"&fecha="+c+"&codInsulina="+d+"&usuario="+e;try{$.blockUI({message:$("#msjEspere")});ajax=nuevoAjax();ajax.open("POST","../../../include/Movhos/kardex.inc.php",true);ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");ajax.send(f);ajax.onreadystatechange=function(){if(ajax.readyState== 4&&ajax.status==200){if(ajax.responseText==1){var g=document.getElementById("cntEsquema"),j=document.getElementById("cntEsquemaActual");if(g)g.style.display="none";if(j)j.style.display="none";if(document.getElementById("btnQuitarEsquema"))document.getElementById("btnQuitarEsquema").disabled=true;if(document.getElementById("wdexins"))document.getElementById("wdexins").value="";if(document.getElementById("wdexfrecuencia"))document.getElementById("wdexfrecuencia").value="";if(document.getElementById("wdexesquema"))document.getElementById("wdexesquema").value= "";if(document.getElementById("btnEsquema"))document.getElementById("btnEsquema").disabled=true}if(ajax.responseText==0)h="No se pudo eliminar el esquema"}$.unblockUI();$.growlUI("",h)};estaEnProceso(ajax)||ajax.send(null)}catch(k){}};